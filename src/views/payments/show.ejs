<% layout('layout') %>
<div class="d-flex align-items-center justify-content-between mb-3">
  <h3 class="mb-0">Payment for Booking #<%= payment.bookingId %> - <%= payment.booking.partyName %></h3>
  <a href="/payments" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Back</a>
</div>

<div class="row g-3">
  <div class="col-lg-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-6 text-muted">Party Total</div>
          <div class="col-6"><strong><%= payment.totalFromParty %></strong></div>
          <div class="col-6 text-muted">Paid by Party</div>
          <div class="col-6"><strong><%= payment.paidByParty %></strong></div>
          <div class="col-6 text-muted">Payable to Malik</div>
          <div class="col-6"><strong><%= payment.amountPayableMalik %></strong></div>
          <div class="col-6 text-muted">Paid to Malik</div>
          <div class="col-6"><strong><%= payment.paidToMalik %></strong></div>
          <div class="col-6 text-muted">Commission</div>
          <div class="col-6"><strong><%= payment.commissionEarned %></strong></div>
          <div class="col-6 text-muted">Status</div>
          <div class="col-6"><span class="badge <%= payment.paymentStatus==='ALL_PAID' ? 'text-bg-success' : (payment.paymentStatus==='PARTY_PENDING' ? 'text-bg-warning' : 'text-bg-secondary') %>"><%= payment.paymentStatus %></span></div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h5 class="card-title">Record Payments</h5>
        <form class="row g-2" method="post" action="/payments/<%= payment.bookingId %>/party-pay">
          <div class="col-8">
            <label class="form-label">Party Payment</label>
            <input class="form-control" type="number" step="0.01" name="amount" required>
          </div>
          <div class="col-4 d-flex align-items-end">
            <button type="submit" class="btn btn-success w-100"><i class="bi bi-plus-circle"></i> Add</button>
          </div>
        </form>
        <hr/>
        <form class="row g-2" method="post" action="/payments/<%= payment.bookingId %>/malik-pay">
          <div class="col-8">
            <label class="form-label">Payment to Malik</label>
            <input class="form-control" type="number" step="0.01" name="amount" required>
          </div>
          <div class="col-4 d-flex align-items-end">
            <button type="submit" class="btn btn-primary w-100"><i class="bi bi-plus-circle"></i> Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


