<% layout('layout') %>
<div class="d-flex align-items-center justify-content-between mb-3">
  <h3 class="mb-0">New Booking</h3>
  <a href="/bookings" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Back</a>
</div>

<form method="post" action="/bookings" class="card card-body shadow-sm">
  <div class="row g-3">
    <div class="col-md-3">
      <label class="form-label">Booking Date</label>
      <input class="form-control" type="date" name="bookingDate">
    </div>
    <div class="col-md-3">
      <label class="form-label">Party Name</label>
      <input class="form-control" name="partyName" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Party Contact</label>
      <input class="form-control" name="partyContact">
    </div>
    <div class="col-md-3"></div>
    <div class="col-md-3">
      <label class="form-label">Source City</label>
      <select class="form-select" name="sourceCityId" required>
        <option value="">-- Select City --</option>
        <% (cities || []).forEach(c => { %>
          <option value="<%= c.id %>"><%= c.name %><%= c.state ? ' ('+c.state+')' : '' %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-md-3">
      <label class="form-label">Destination City</label>
      <select class="form-select" name="destinationCityId" required>
        <option value="">-- Select City --</option>
        <% (cities || []).forEach(c => { %>
          <option value="<%= c.id %>"><%= c.name %><%= c.state ? ' ('+c.state+')' : '' %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-md-6">
      <label class="form-label">Pickup Address</label>
      <input class="form-control" name="pickupAddress" placeholder="Enter detailed pickup address">
    </div>
    <div class="col-md-6">
      <label class="form-label">Drop Address</label>
      <input class="form-control" name="dropAddress" placeholder="Enter detailed drop address">
    </div>
    <div class="col-md-3">
      <label class="form-label">Vehicle Type</label>
      <select class="form-select" name="requestedVehicle" required>
        <option value="CONTAINER_32FT">32ft Container</option>
        <option value="OPEN_20FT">20ft Open Body</option>
        <option value="OPEN_22FT">22ft Open Body</option>
        <option value="TRAILER">Trailer</option>
        <option value="OTHER">Other</option>
      </select>
    </div>
    <div class="col-md-3">
      <label class="form-label">Assign Vehicle</label>
      <select class="form-select" name="vehicleId">
        <option value="">-- Auto/None --</option>
        <% vehicles.forEach(v => { %>
          <option value="<%= v.id %>"><%= v.vehicleNumber %> - <%= v.ownerName %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Malik Name (auto if vehicle selected)</label>
      <input class="form-control" name="malikName">
    </div>
    <div class="col-md-4">
      <label class="form-label">Rate Taken from Malik</label>
      <input class="form-control" type="number" step="0.01" name="malikRate" required>
    </div>
    <div class="col-md-4">
      <label class="form-label">Rate Given to Party</label>
      <input class="form-control" type="number" step="0.01" name="partyRate" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Status</label>
      <select class="form-select" name="status">
        <option value="PENDING">Pending</option>
        <option value="IN_TRANSIT">In-transit</option>
        <option value="COMPLETED">Completed</option>
        <option value="CANCELLED">Cancelled</option>
      </select>
    </div>
    <div class="col-12">
      <label class="form-label">Notes</label>
      <textarea class="form-control" name="notes" rows="3" placeholder="Enter any additional notes or comments"></textarea>
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Create</button>
    </div>
  </div>
</form>


